<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Pomodoro</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body {
      font-family: system-ui, sans-serif;
      background: #2f3437; /* gris oscuro estilo Notion */
      color: #fff;
      margin: 0;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    .timer {
      text-align: center;
    }
    .time {
      font-size: 80px;
      font-weight: bold;
      margin-bottom: 15px;
    }
    .status {
      font-size: 18px;
      color: #aaa;
    }
  </style>
</head>
<body>
  <div class="timer">
    <div class="time" id="display">30:00</div>
    <div class="status" id="status">Listo</div>
  </div>

  <script>
    // Configuraci√≥n
    const WORK = 30 * 60;      // 30 min trabajo
    const SHORT_BREAK = 5 * 60; // 5 min descanso corto
    const LONG_BREAK = 15 * 60; // 15 min descanso largo
    const LONG_BREAK_INTERVAL = 4; // cada 4 pomodoros ‚Üí descanso largo

    let remaining = WORK;
    let running = false;
    let interval = null;
    let cycleCount = 0; // cu√°ntos pomodoros terminados
    let mode = "work"; // "work", "short", "long"

    const display = document.getElementById("display");
    const status = document.getElementById("status");

    function render() {
      let m = Math.floor(remaining / 60);
      let s = remaining % 60;
      display.textContent = `${String(m).padStart(2, "0")}:${String(s).padStart(2, "0")}`;
    }

    function tick() {
      if (remaining > 0) {
        remaining--;
        render();
      } else {
        clearInterval(interval);
        running = false;

        if (mode === "work") {
          cycleCount++;
          if (cycleCount % LONG_BREAK_INTERVAL === 0) {
            mode = "long";
            remaining = LONG_BREAK;
            status.textContent = "üåô Descanso largo";
          } else {
            mode = "short";
            remaining = SHORT_BREAK;
            status.textContent = "‚òï Descanso corto";
          }
          start();
        } else {
          mode = "work";
          remaining = WORK;
          status.textContent = "üîî Nuevo pomodoro";
          start();
        }
      }
    }

    function start() {
      if (running) return;
      running = true;
      interval = setInterval(tick, 1000);
      status.textContent = mode === "work" ? "‚ñ∂Ô∏è En trabajo" : status.textContent;
    }

    function pause() {
      running = false;
      clearInterval(interval);
      status.textContent = "‚è∏Ô∏è Pausado";
    }

    function stop() {
      running = false;
      clearInterval(interval);
      mode = "work";
      remaining = WORK;
      render();
      status.textContent = "Listo";
    }

    render();
  </script>
</body>
</html>
